<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0f172a">
  <title>صرافی اسفندیاری | مینی‌اپ تلگرام</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    @font-face {
      font-family: "IRYekan";
      src: url("./fonts/IRANYekanXFaNum-Regular.ttf") format("truetype");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: "IRYekan";
      src: url("./fonts/IRANYekanXFaNum-Bold.ttf") format("truetype");
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }

    :root {
      --bg: #0f172a;
      --text: #e9eff8;
      --muted: #b7c6dd;
      --accent: #34bef3;
      --accent-strong: #2bd18c;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "IRYekan", "Tahoma", sans-serif;
      background: linear-gradient(145deg, rgba(52, 190, 243, 0.12), rgba(43, 209, 140, 0.12)),
        radial-gradient(120% 80% at 20% 10%, rgba(255, 255, 255, 0.05), transparent),
        var(--bg);
      color: var(--text);
      padding: calc(18px + env(safe-area-inset-top)) 16px calc(22px + env(safe-area-inset-bottom));
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .layout {
      width: min(520px, 100%);
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .topline {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.05);
      display: grid;
      place-items: center;
      box-shadow: 0 10px 24px rgba(52, 190, 243, 0.25);
    }

    .logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .brand-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .brand-name {
      font-weight: 700;
      font-size: 1.05rem;
      letter-spacing: -0.2px;
    }

    .pill {
      font-size: 0.9rem;
      color: var(--muted);
    }

    .hero {
      margin-top: 4px;
    }

    .hero h1 {
      margin: 4px 0 6px;
      font-size: clamp(1.35rem, 4vw, 1.75rem);
      letter-spacing: -0.3px;
    }

    .hero p {
      margin: 0;
      color: var(--muted);
      line-height: 1.65;
      font-size: 0.94rem;
    }

    .viewport {
      position: relative;
      overflow: hidden;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      touch-action: pan-y;
    }

    .track {
      display: flex;
      width: 100%;
      transition: transform 0.35s cubic-bezier(0.22, 0.61, 0.36, 1);
      will-change: transform;
    }

    .slide {
      flex: 0 0 100%;
      padding: 18px 16px 22px;
      display: grid;
      gap: 12px;
      min-height: 240px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.04), transparent);
    }

    .icon {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      display: grid;
      place-items: center;
      color: var(--accent);
      font-weight: 700;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.04);
    }

    .slide h2 {
      margin: 0;
      font-size: 1.12rem;
    }

    .slide p {
      margin: 0;
      color: var(--muted);
      line-height: 1.7;
      font-size: 0.94rem;
    }

    .cta {
      justify-self: start;
      padding: 14px 18px;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #0c1729;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 12px 26px rgba(42, 211, 139, 0.22);
      transition: transform 0.15s ease, box-shadow 0.2s ease;
    }

    .cta:active {
      transform: translateY(1px);
      box-shadow: 0 10px 20px rgba(42, 211, 139, 0.2);
    }

    .dots {
      display: inline-flex;
      gap: 6px;
      margin-top: 10px;
      align-self: center;
    }

    .dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.18);
      transition: width 0.3s ease, background 0.3s ease;
    }

    .dot.is-active {
      width: 18px;
      background: var(--accent);
      box-shadow: 0 6px 14px rgba(52, 190, 243, 0.3);
    }

    .note {
      color: var(--muted);
      font-size: 0.88rem;
      line-height: 1.6;
      margin-top: 6px;
    }

    @media (prefers-reduced-motion: reduce) {
      .track, .dot, .cta { transition: none; }
    }
  </style>
</head>
<body>
  <div class="layout">
    <div class="topline">
      <div class="logo">
        <img src="./esf_modern.png" alt="لوگوی صرافی اسفندیاری">
      </div>
      <div class="brand-text">
        <div class="brand-name">صرافی اسفندیاری</div>
        <div class="pill">مینی‌اپ تلگرام · تجربه امن</div>
      </div>
    </div>

    <section class="hero" aria-label="معرفی کوتاه">
      <h1>تبدیل و واریز سریع در تلگرام</h1>
      <p>از ریال تا تتر در چند ثانیه؛ نرخ شفاف، بدون فرم طولانی، در همان محیط تلگرام.</p>
    </section>

    <section class="viewport" aria-label="ویژگی‌ها" role="group">
      <div class="track" data-track>
        <article class="slide" aria-label="تبدیل سریع">
          <div class="icon" aria-hidden="true">۱</div>
          <h2>تبدیل فوری</h2>
          <p>نرخ لحظه‌ای و کارمزد مشخص؛ ریال و تتر را در چند ثانیه جابه‌جا کنید.</p>
        </article>
        <article class="slide" aria-label="کیف پول ساده">
          <div class="icon" aria-hidden="true">۲</div>
          <h2>کیف پول ساده</h2>
          <p>واریز و برداشت با کارت یا تتر، پیگیری وضعیت در همان چت و اعلان فوری پس از انجام.</p>
        </article>
        <article class="slide" aria-label="شروع آسان">
          <div class="icon" aria-hidden="true">۳</div>
          <h2>ثبت‌نام و شروع</h2>
          <p>عضویت کوتاه، پشتیبانی درون تلگرام و تسویه مطمئن. برای شروع آماده‌اید؟</p>
          <button class="cta" type="button" id="start-btn" aria-label="شروع ثبت‌نام">ثبت‌نام و شروع</button>
        </article>
      </div>
    </section>

    <div class="dots" aria-hidden="true">
      <span class="dot is-active"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>

    <div class="note">
      این صفحه فقط معرفی است. تسویه و ثبت نهایی در سرورهای صرافی اسفندیاری انجام می‌شود و نتیجه در حساب شما نمایش داده می‌شود.
    </div>
  </div>

  <script>
    const root = document.documentElement;
    const track = document.querySelector("[data-track]");
    const slides = Array.from(document.querySelectorAll(".slide"));
    const dots = Array.from(document.querySelectorAll(".dot"));
    const startBtn = document.getElementById("start-btn");
    let index = 0;
    let startX = 0;
    let currentX = 0;
    let isDragging = false;

    const setIndex = (i) => {
      index = Math.max(0, Math.min(i, slides.length - 1));
      if (track) track.style.transform = `translate3d(-${index * 100}%, 0, 0)`;
      dots.forEach((dot, idx) => dot.classList.toggle("is-active", idx === index));
    };

    const onPointerDown = (e) => {
      isDragging = true;
      startX = e.clientX || e.touches?.[0]?.clientX || 0;
      currentX = startX;
      track.style.transition = "none";
    };

    const onPointerMove = (e) => {
      if (!isDragging) return;
      const x = e.clientX || e.touches?.[0]?.clientX || 0;
      currentX = x;
      const delta = currentX - startX;
      track.style.transform = `translate3d(calc(-${index * 100}% + ${delta}px), 0, 0)`;
    };

    const onPointerUp = () => {
      if (!isDragging) return;
      const delta = currentX - startX;
      const threshold = 60;
      if (delta > threshold) setIndex(index - 1);
      else if (delta < -threshold) setIndex(index + 1);
      else setIndex(index);
      track.style.transition = "";
      isDragging = false;
    };

    track.addEventListener("pointerdown", onPointerDown);
    track.addEventListener("pointermove", onPointerMove);
    window.addEventListener("pointerup", onPointerUp);
    track.addEventListener("touchstart", (e) => { onPointerDown(e); }, { passive: true });
    track.addEventListener("touchmove", (e) => { onPointerMove(e); }, { passive: true });
    window.addEventListener("touchend", onPointerUp, { passive: true });

    setIndex(0);

    startBtn?.addEventListener("click", () => {
      window.Telegram?.WebApp?.HapticFeedback?.impactOccurred("soft");
      if (window.Telegram?.WebApp?.MainButton) {
        window.Telegram.WebApp.MainButton.text = "در حال شروع...";
        window.Telegram.WebApp.MainButton.show();
      }
      window.Telegram?.WebApp?.expand?.();
    });

    const applyTheme = () => {
      const params = window.Telegram?.WebApp?.themeParams || {};
      const normalize = (value) => {
        if (!value) return null;
        const v = String(value).trim();
        return v.startsWith("#") ? v : `#${v}`;
      };
      const bg = normalize(params.bg_color) || "#0f172a";
      root.style.setProperty("--bg", bg);
      root.style.setProperty("--text", normalize(params.text_color) || "#e9eff8");
      root.style.setProperty("--muted", normalize(params.hint_color) || "#b7c6dd");
      root.style.setProperty("--accent", normalize(params.button_color) || "#34bef3");
      root.style.setProperty("--accent-strong", normalize(params.button_text_color) || "#2bd18c");
      document
        .querySelector('meta[name="theme-color"]')
        .setAttribute("content", getComputedStyle(root).getPropertyValue("--bg").trim());
    };

    window.Telegram?.WebApp?.onEvent?.("themeChanged", applyTheme);
    applyTheme();
    window.Telegram?.WebApp?.setHeaderColor?.("secondary_bg_color");
    window.Telegram?.WebApp?.ready?.();
  </script>
</body>
</html>
